package me.nuf.glade.module.impl.exploits;

import me.nuf.glade.module.Category;
import me.nuf.glade.module.ToggleableModule;
import me.nuf.glade.subjects.MotionUpdateSubject;
import me.nuf.subjectapi.Listener;
import net.minecraft.network.play.client.C03PacketPlayer;

/**
 * Created by nuf on 3/30/2016.
 */
public final class Paralyze extends ToggleableModule {
    public Paralyze() {
        super(new String[]{"Paralyze"}, true, 0xFF14A662, Category.EXPLOITS);
        this.addListeners(new Listener<MotionUpdateSubject>("paralyze_motion_update_listener") {
            @Override
            public void call(MotionUpdateSubject subject) {
                switch (subject.getTime()) {
                    case PRE:
                        if (!minecraft.theWorld.getEntitiesWithinAABBExcludingEntity(minecraft.thePlayer, minecraft.thePlayer.getEntityBoundingBox()).isEmpty() && minecraft.thePlayer.onGround)
                            for (int index = 0; index < 100; index++) {
                                minecraft.getNetHandler().addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(minecraft.thePlayer.posX, minecraft.thePlayer.posY + 0.000000001, minecraft.thePlayer.posZ, false));
                                minecraft.getNetHandler().addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(minecraft.thePlayer.posX, minecraft.thePlayer.posY, minecraft.thePlayer.posZ, false));
                            }
                        break;
                }
            }
        });
    }
}
